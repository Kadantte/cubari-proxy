(this["webpackJsonpguya-proxy"]=this["webpackJsonpguya-proxy"]||[]).push([[0],{174:function(e,t,a){e.exports=a(391)},179:function(e,t,a){},180:function(e,t,a){},205:function(e,t){},219:function(e,t){},221:function(e,t){},391:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(172),c=a.n(i),s=(a(179),a(180),a(3)),l=a(4),o=a(10),u=a(9),m=a(27),d=a(1),g=new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.isIntersecting){var a=e.target.querySelector("img");a.src=a.dataset.src,t.unobserve(e.target)}}))})),h=a(46),f=new Event("history-changed"),v=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).saveToHistory=function(e){0!==e.button&&1!==e.button||function(e,t,a,n){var r=localStorage.getItem("history");r?((r=JSON.parse(r).filter((function(t){return t.identifier!==e}))).length>=20&&r.pop(),r=[{identifier:e,title:t,url:a,coverUrl:n}].concat(Object(h.a)(r))):r=[{identifier:e,title:t,url:a,coverUrl:n}],window.dispatchEvent(f),localStorage.setItem("history",JSON.stringify(r))}(n.props.mangaUrlizer(n.props.slug),n.props.mangaTitle,n.props.mangaUrlizer(n.props.slug),n.props.coverUrl)},n.componentDidMount=function(){g.observe(n.ref.current)},n.ref=r.a.createRef(),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"column is-6-mobile is-3-tablet is-2-desktop",ref:this.ref},r.a.createElement("div",{className:"manga card"},r.a.createElement("div",{className:"manga card-image"},r.a.createElement("a",{href:this.props.mangaUrlizer(this.props.slug),target:"_blank",rel:"noopener noreferrer",onMouseDown:this.saveToHistory},r.a.createElement("figure",{className:"image"},r.a.createElement("img",{"data-src":this.props.coverUrl,alt:this.props.slug})))),r.a.createElement("div",{className:"manga card-content"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("p",{className:"title is-5"},r.a.createElement("a",{href:this.props.mangaUrlizer(this.props.slug),target:"_blank",rel:"noopener noreferrer",onMouseDown:this.saveToHistory},this.props.mangaTitle)))))))}}]),a}(n.PureComponent),p=function(e){return e.split(" ").filter(Boolean).map((function(e){return e.charAt(0).toUpperCase()+e.toLowerCase().slice(1)})).join(" ")},y=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).createHeroSection=function(e){return r.a.createElement("section",{key:e.id,className:"hero column is-full"},r.a.createElement("h1",{className:"title is-4"},p(e.title)))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=[];return this.props.discover.forEach((function(a){t.push(e.createHeroSection(a)),a.items.forEach((function(e){t.push(r.a.createElement(v,{key:a.id+e.slug,mangaUrlizer:a.mangaUrlizer,slug:e.slug,coverUrl:e.coverUrl,mangaTitle:e.mangaTitle}))}))})),r.a.createElement("div",{className:"columns is-mobile is-multiline"},r.a.createElement("section",{className:"hero column is-full"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},"Discover"),r.a.createElement("h2",{className:"subtitle"},"Discover your favourites here.")))),this.props.discover.size?t:r.a.createElement("progress",{className:"progress is-small"}))}}]),a}(n.PureComponent),E=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleInput=function(e){if("Enter"===e.key){var t={title:e.target.value};n.setState({searching:!0,results:new Set},(function(){n.runSearchQuery(t)}))}},n.runSearchQuery=function(e){n.props.sources.forEach((function(t){var a={source:t,query:e};n.runningQueries.add(a);var r=t.searchRequest(e);r().then((function(e){return e.text()})).then((function(e){var i=t.search(e,r.metadata).map((function(e){return e.mangaUrlizer=t.getMangaUrl,e}));n.runningQueries.delete(a),n.setState({results:new Set([].concat(Object(h.a)(n.state.results),Object(h.a)(i))),searching:!!n.runningQueries.size})}))}))},n.state={searching:!1,results:new Set},n.runningQueries=new Set,n}return Object(l.a)(a,[{key:"render",value:function(){var e=[];return this.state.results.forEach((function(t){return e.push(r.a.createElement(v,{key:t.slug,mangaUrlizer:t.mangaUrlizer,slug:t.slug,coverUrl:t.coverUrl,mangaTitle:t.mangaTitle}))})),r.a.createElement("div",{className:"columns is-mobile is-multiline"},r.a.createElement("section",{className:"hero column is-full"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},"Search"),r.a.createElement("h2",{className:"subtitle"},"Press enter after your query to search."))),r.a.createElement("input",{className:"input is-medium",onKeyPress:this.handleInput,type:"text",placeholder:"Search..."})),e,this.state.searching?r.a.createElement("progress",{className:"progress is-small"}):void 0)}}]),a}(n.PureComponent),b=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("history")||"[]").map((function(e){return r.a.createElement(v,{key:e.identifier,mangaUrlizer:function(e){return e},slug:e.identifier,coverUrl:e.coverUrl,mangaTitle:e.title})}));return r.a.createElement("div",{className:"columns is-mobile is-multiline"},r.a.createElement("section",{className:"hero column is-full"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},"History"),r.a.createElement("h2",{className:"subtitle"},"Note that this history is different from your remotestorage history on guya.moe.")))),e.length?e:r.a.createElement("section",{className:"hero column is-full"},r.a.createElement("h1",{className:"title is-4"},"No items.")))}}]),a}(n.PureComponent),N=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"columns is-mobile is-multiline"},r.a.createElement("section",{className:"hero column is-full"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},"404"),r.a.createElement("h2",{className:"subtitle"},"Go home? Or visit ",r.a.createElement("a",{href:"https://guya.moe/"},"guya.moe"),".")))))}}]),a}(n.PureComponent),x=a(44),S=a(26),O=a.n(S),k=a(68),T=function(){var e=Object(k.a)(O.a.mark((function e(t,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://cors-anywhere.herokuapp.com/".concat(t),a));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),w=function(e){var t=function(){var t=Object(k.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",T(e.url,{method:e.method||"GET",headers:e.headers||{},referrerPolicy:"no-referrer",body:e.data}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t.metadata=e.metadata,t},j=function(e){return e.text||""},U=function(e){return{coverUrl:e.image,slug:e.id,mangaTitle:e.title}},M=a(45),_=a.n(M),q="https://mangadex.org",I=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"getHomePageSectionRequest",value:function(){return[{request:w({url:q,method:"GET"}),sections:[{id:"featured_titles",title:"FEATURED TITLES"},{id:"new_titles",title:"NEW TITLES"}]},{request:w({url:"".concat(q,"/updates"),method:"GET"}),sections:[{id:"recently_updated",title:"RECENTLY UPDATED TITLES"}]}]}},{key:"getHomePageSections",value:function(e,t){var a=this,n=_.a.load(e);return t.map((function(e){switch(e.id){case"featured_titles":e.items=a.parseFeaturedMangaTiles(n);break;case"new_titles":e.items=a.parseNewMangaSectionTiles(n);break;case"recently_updated":e.items=a.parseRecentlyUpdatedMangaSectionTiles(n)}return e}))}},{key:"parseFeaturedMangaTiles",value:function(e){var t=[];return e("#hled_titles_owl_carousel .large_logo").each((function(a,n){var r,i,c,s=e(n),l=s.find("img").first(),o=null!==(r=(s.find("a").first().attr("href")||"").match(/(\d+)(?=\/)/))&&void 0!==r?r:"-1",u=s.find(".car-caption p:nth-child(2)"),m=u.find("span[title=Follows]").text(),d=u.find("span[title=Rating]").text();t.push(U({id:o[0],image:null!==(i=l.attr("data-src"))&&void 0!==i?i:"",title:j({text:null!==(c=l.attr("title"))&&void 0!==c?c:""}),primaryText:j({text:m,icon:"bookmark.fill"}),secondaryText:j({text:d,icon:"star.fill"})}))})),t}},{key:"parseNewMangaSectionTiles",value:function(e){var t=[];return e("#new_titles_owl_carousel .large_logo").each((function(a,n){var r,i,c=e(n),s=c.find("img").first(),l=c.find("a").first().attr("href").match(/(\d+)(?=\/)/),o=c.find(".car-caption p:nth-child(2)"),u=o.find("span").text();t.push(U({id:l[0],image:null!==(r=s.attr("data-src"))&&void 0!==r?r:" ",title:j({text:null!==(i=s.attr("title"))&&void 0!==i?i:" "}),subtitleText:j({text:o.find("a").text()}),secondaryText:j({text:u,icon:"clock.fill"})}))})),t}},{key:"parseRecentlyUpdatedMangaSectionTiles",value:function(e){for(var t=[],a=e("tr","tbody").toArray(),n=0;n<a.length;){var r,i,c,s,l,o=!1,u=null!==(i=(null!==(c=(null!==(r=e("a.manga_title",a[n]).attr("href"))&&void 0!==r?r:"").match(/(\d+)(?=\/)/))&&void 0!==c?c:"")[0])&&void 0!==i?i:"",m=null!==(s=e("a.manga_title",a[n]).text())&&void 0!==s?s:"",d=null!==(l=q+e("img",a[n]).attr("src"))&&void 0!==l?l:"",g=0,h="",f="",v="",p=!0;for(n++;!o&&n<a.length;)p&&!o&&(h=e("a",a[n]).first().text(),f=e(".text-center.text-info",a[n]).text(),v=e("time",a[n]).text().replace("ago","").trim(),p=!1),g++,o=e(a[++n]).find("img").length>0;t.push(U({id:u,image:d,title:j({text:m}),subtitleText:j({text:h}),primaryText:j({text:f,icon:"eye.fill"}),secondaryText:j({text:v,icon:"clock.fill"}),badge:g}))}return t}},{key:"getMangaDetails",value:function(e,t){var a,n=JSON.parse(e),r=[],i=Object(x.a)(n.result);try{for(i.s();!(a=i.n()).done;){var c=a.value;r.push({id:c.id.toString(),titles:c.titles[0],image:c.image,rating:c.rating,status:c.status,langFlag:c.langFlag,langName:c.langName,artist:c.artist,author:c.author,avgRating:c.avgRating,covers:c.covers,desc:c.description,follows:c.follows,users:c.users,views:c.views,hentai:c.hentai,relatedIds:c.relatedIds,lastUpdate:c.lastUpdate})}}catch(s){i.e(s)}finally{i.f()}return r}},{key:"searchRequest",value:function(e,t){return w({url:"https://mangadexapi.appspot.com/search",method:"POST",data:JSON.stringify({title:e.title}),headers:{"content-type":"application/json"}})}},{key:"search",value:function(e,t){return this.getMangaDetails(e,{}).map((function(e){return U({id:e.id,image:e.image,title:j({text:("string"===typeof e.titles?e.titles:e.titles[0])||"Unknown"})})}))}},{key:"getMangaUrl",value:function(e){return"https://guya.moe/title/".concat(e,"/")}}]),e}(),D="".concat("https://guya.moe","/api/get_all_series/"),P=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"getHomePageSectionRequest",value:function(){return[{request:w({url:D,method:"GET"}),sections:[{id:"all_guya",title:"ALL GUYA"}]}]}},{key:"getHomePageSections",value:function(e,t){var a="string"===typeof e?JSON.parse(e):e;return t.map((function(e){var t=[];for(var n in a){var r=a[n];t.push(U({id:r.slug,image:"".concat("https://guya.moe","/").concat(r.cover),title:j({text:n})}))}return e.items=t,e}))}},{key:"searchRequest",value:function(e,t){return w({metadata:{query:e.title},url:D,method:"GET"})}},{key:"search",value:function(e,t){var a="string"===typeof e?JSON.parse(e):e,n=t.query.toLowerCase();return Object.keys(a).filter((function(e){return e.toLowerCase().includes(n)})).map((function(e){var t=a[e];return U({id:t.slug,image:"".concat("https://guya.moe","/").concat(t.cover),title:j({text:e})})}))}},{key:"getMangaUrl",value:function(e){return"https://guya.moe/read/manga/".concat(e,"/")}}]),e}(),z=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"searchRequest",value:function(e,t){var a;if(!1===e.hStatus)return null;if(null===(a=e.title)||void 0===a?void 0:a.match(/\d{5,6}/))return w({url:"".concat("https://nhentai.net","/g/").concat(e.title),metadata:{sixDigit:!0},timeout:4e3,method:"GET"});var n="";if(e.title&&(n+=e.title.replace(" ","+")+"+"),e.includeContent)for(var r in e.includeContent)n+='tag:"'+e.includeContent[r].replace(" ","+")+'"+';if(e.excludeContent)for(var i in e.excludeContent)n+='-tag:"'+e.excludeContent[i].replace(" ","+")+'"+';return e.artist&&(n+="Artist:"+e.artist.replace(" ","+")+"+"),n=n.trim(),n=encodeURI(n),w({url:"".concat("https://nhentai.net","/search/?q=").concat(n,"&page=").concat(t),metadata:{sixDigit:!1},timeout:4e3,method:"GET"})}},{key:"search",value:function(e,t){var a=_.a.load(e),n=[];if(t.sixDigit){var r,i,c=a("#bigcontainer"),s=a("a",c).attr("href"),l=parseInt(null===s||void 0===s?void 0:s.match(/g\/(\d*)\/\d/)[1]),o=null!==(r=a("[itemprop=name]").attr("content"))&&void 0!==r?r:"";return o=o.replace(/(\[.+?\])/g,"").trim(),n.push(U({id:l.toString(),title:j({text:o}),image:null!==(i=a("[itemprop=image]").attr("content"))&&void 0!==i?i:""})),n}var u,m=a(".index-container"),d=Object(x.a)(a(".gallery",m).toArray());try{for(d.s();!(u=d.n()).done;){var g,h=a(u.value),f=a("img",h).attr("data-src");void 0===f&&(f="http:"+a("img",h).attr("src"));var v=a(".caption",h).text(),p=null===(g=a("a",h).attr("href"))||void 0===g?void 0:g.match(/\/(\d*)\//);v=v.replace(/(\[.+?\])/g,"").trim(),n.push(U({id:p[1],title:j({text:v}),image:f}))}}catch(y){d.e(y)}finally{d.f()}return n}},{key:"getHomePageSectionRequest",value:function(){return[{request:w({url:"".concat("https://nhentai.net"),method:"GET"}),sections:[{id:"latest_hentai",title:"LATEST HENTAI",view_more:!0}]}]}},{key:"getHomePageSections",value:function(e,t){var a,n=[],r=_.a.load(e),i=r(".index-container"),c=Object(x.a)(r(".gallery",i).toArray());try{for(c.s();!(a=c.n()).done;){var s,l=r(a.value),o=r("img",l).attr("data-src");void 0===o&&(o="http:"+r("img",l).attr("src"));var u=r(".caption",l).text();u=u.replace(/(\[.+?\])/g,"").trim();var m=null===(s=r("a",l).attr("href"))||void 0===s?void 0:s.match(/\/(\d*)\//);n.push(U({id:m[1],title:j({text:u}),image:o}))}}catch(d){c.e(d)}finally{c.f()}return t[0].items=n,t}},{key:"getMangaUrl",value:function(e){return"https://guya.moe/g/".concat(e,"/")}}]),e}(),C={};localStorage.getItem("hentai")||window.location.search.includes("hentai")?C.NHentai=new z:(C.MangaDex=new I,C.Guya=new P);var H=C,R=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).initializeMobileMenu=function(){var e=document.getElementById("navMenu"),t=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);t.length>0&&t.forEach((function(t){t.addEventListener("click",(function(){t.classList.toggle("is-active"),e.classList.toggle("is-active")}))})),Array.prototype.slice.call(document.querySelectorAll(".ni"),0).forEach((function(t){t.addEventListener("click",(function(){document.querySelector(".navbar-burger").classList.remove("is-active"),e.classList.remove("is-active")}))}))},n.initializeDiscoverItems=function(){n.sources.forEach((function(e){e.getHomePageSectionRequest().forEach((function(t){t.request().then((function(e){return e.text()})).then((function(a){e.getHomePageSections(a,t.sections).forEach((function(t){t.source=e,t.mangaUrlizer=e.getMangaUrl,n.setState({discover:new Set(n.state.discover).add(t)})}))}))}))}))},n.componentDidMount=function(){n.initializeMobileMenu(),n.initializeDiscoverItems()},n.state={discover:new Set},n.sources=Object.values(H),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement("nav",{className:"navbar is-dark",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("div",{className:"navbar-item navbar-logo"},r.a.createElement(m.b,{to:"/"},r.a.createElement("img",{src:"https://guya.moe/static/logo_small.png",alt:"logo"}))),r.a.createElement("a",{role:"button",className:"navbar-burger","aria-label":"menu","aria-expanded":"false"},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{id:"navMenu",className:"navbar-menu"},r.a.createElement("div",{className:"navbar-start"},r.a.createElement(m.b,{className:"navbar-item ni",to:"/"},"Discover"),r.a.createElement(m.b,{className:"navbar-item ni",to:"/search"},"Search"),r.a.createElement(m.b,{className:"navbar-item ni",to:"/history"},"History"))))),r.a.createElement("div",{className:"container is-fluid"},r.a.createElement("div",{className:"container"},r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/"},r.a.createElement(y,{discover:this.state.discover})),r.a.createElement(d.a,{exact:!0,path:"/search"},r.a.createElement(E,{sources:this.sources})),r.a.createElement(d.a,{exact:!0,path:"/history"},r.a.createElement(b,null)),r.a.createElement(d.a,null,r.a.createElement(N,null))))))}}]),a}(n.Component);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root"))}},[[174,1,2]]]);