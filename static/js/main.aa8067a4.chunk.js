(this["webpackJsonpcubari-proxy"]=this["webpackJsonpcubari-proxy"]||[]).push([[0],{216:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),c=a(88),i=a.n(c),s=(a(95),a(96),a(6)),o=a(9),u=a(8),l=a(7),d=a(28),h=a(10),p=new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.isIntersecting){var a=e.target.querySelector("img");a.src=a.dataset.src,t.unobserve(e.target)}}))})),f=a(34),g="history",m=new Event("history-changed"),v=a(1),b=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).saveToHistory=function(e){0!==e.button&&1!==e.button||function(e,t,a,r){var n=localStorage.getItem(g);n?((n=JSON.parse(n).filter((function(t){return t.identifier!==e}))).length>=20&&n.pop(),n=[{identifier:e,title:t,url:a,coverUrl:r}].concat(Object(f.a)(n))):n=[{identifier:e,title:t,url:a,coverUrl:r}],window.dispatchEvent(m),localStorage.setItem(g,JSON.stringify(n))}(r.props.mangaUrlizer(r.props.slug),r.props.mangaTitle,r.props.mangaUrlizer(r.props.slug),r.props.coverUrl)},r.componentDidMount=function(){p.observe(r.ref.current)},r.ref=n.a.createRef(),r}return Object(o.a)(a,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"column is-6-mobile is-3-tablet is-2-desktop",ref:this.ref,children:Object(v.jsxs)("div",{className:"manga card",children:[Object(v.jsx)("div",{className:"manga card-image",children:Object(v.jsx)("a",{href:this.props.mangaUrlizer(this.props.slug),target:"_blank",rel:"noopener noreferrer",onMouseDown:this.saveToHistory,children:Object(v.jsx)("figure",{className:"image",children:Object(v.jsx)("img",{"data-src":this.props.coverUrl,alt:this.props.slug})})})}),Object(v.jsx)("div",{className:"manga card-content",children:Object(v.jsx)("div",{className:"media",children:Object(v.jsx)("div",{className:"media-content",children:Object(v.jsx)("p",{className:"title is-5",children:Object(v.jsx)("a",{href:this.props.mangaUrlizer(this.props.slug),target:"_blank",rel:"noopener noreferrer",onMouseDown:this.saveToHistory,children:this.props.mangaTitle})})})})})]})})}}]),a}(r.PureComponent),y=function(e){return e.split(" ").filter(Boolean).map((function(e){return e.charAt(0).toUpperCase()+e.toLowerCase().slice(1)})).join(" ")},x=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).createHeroSection=function(e){return Object(v.jsx)("section",{className:"hero column is-full",children:Object(v.jsx)("h1",{className:"title is-4",children:y(e.title)})},e.id+e.title)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=[];return this.props.discover.forEach((function(a){t.push(e.createHeroSection(a)),a.items&&a.items.forEach((function(e){t.push(Object(v.jsx)(b,{mangaUrlizer:a.mangaUrlizer,slug:e.id,coverUrl:e.image,mangaTitle:e.title.text},a.id+e.id))}))})),Object(v.jsxs)("div",{className:"columns is-mobile is-multiline",children:[Object(v.jsx)("section",{className:"hero column is-full",children:Object(v.jsx)("div",{className:"hero-body",children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("h1",{className:"title",children:"Discover"}),Object(v.jsx)("h2",{className:"subtitle",children:"Discover your favourites here."})]})})}),this.props.discover.size?t:Object(v.jsx)("progress",{className:"progress is-small"})]})}}]),a}(r.PureComponent),j=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).handleInput=function(e){if("Enter"===e.key){var t={title:e.target.value};r.setState({searching:!0,results:new Set},(function(){r.runSearchQuery(t)}))}},r.runSearchQuery=function(e){r.props.sources.forEach((function(t){var a={source:t,query:e};r.runningQueries.add(a),t.searchRequest(e).then((function(e){var n=(e.results||[]).map((function(e){return e.mangaUrlizer=t.getMangaUrl,e.slug=e.id,e.coverUrl=e.image,e.mangaTitle=e.title.text,e}));r.runningQueries.delete(a),r.setState({results:new Set([].concat(Object(f.a)(r.state.results),Object(f.a)(n))),searching:!!r.runningQueries.size})}))}))},r.state={searching:!1,results:new Set},r.runningQueries=new Set,r}return Object(o.a)(a,[{key:"render",value:function(){var e=[];return this.state.results.forEach((function(t){return e.push(Object(v.jsx)(b,{mangaUrlizer:t.mangaUrlizer,slug:t.slug,coverUrl:t.coverUrl,mangaTitle:t.mangaTitle},t.slug))})),Object(v.jsxs)("div",{className:"columns is-mobile is-multiline",children:[Object(v.jsxs)("section",{className:"hero column is-full",children:[Object(v.jsx)("div",{className:"hero-body",children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("h1",{className:"title",children:"Search"}),Object(v.jsx)("h2",{className:"subtitle",children:"Press enter after your query to search."})]})}),Object(v.jsx)("input",{className:"input is-medium",onKeyPress:this.handleInput,type:"text",placeholder:"Search..."})]}),e,this.state.searching?Object(v.jsx)("progress",{className:"progress is-small"}):void 0]})}}]),a}(r.PureComponent),O=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem(g)||"[]").map((function(e){return Object(v.jsx)(b,{mangaUrlizer:function(e){return e},slug:e.identifier,coverUrl:e.coverUrl,mangaTitle:e.title},e.identifier)}));return Object(v.jsxs)("div",{className:"columns is-mobile is-multiline",children:[Object(v.jsx)("section",{className:"hero column is-full",children:Object(v.jsx)("div",{className:"hero-body",children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("h1",{className:"title",children:"History"}),Object(v.jsx)("h2",{className:"subtitle",children:"Note that this history is different from your remotestorage history on cubari.moe."})]})})}),e.length?e:Object(v.jsx)("section",{className:"hero column is-full",children:Object(v.jsx)("h1",{className:"title is-4",children:"No items."})})]})}}]),a}(r.PureComponent),k=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"columns is-mobile is-multiline",children:Object(v.jsx)("section",{className:"hero column is-full",children:Object(v.jsx)("div",{className:"hero-body",children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("h1",{className:"title",children:"404"}),Object(v.jsxs)("h2",{className:"subtitle",children:["Go home? Or visit ",Object(v.jsx)("a",{href:"https://cubari.moe/",children:"cubari.moe"}),"."]})]})})})})}}]),a}(r.PureComponent),w=a(0),T=a.n(w),M=a(3),N=a(4),S=a(5),E=a(55),q=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).requestManager={requestsPerSecond:2.5,requestTimeout:15e3,schedule:function(){var e=Object(N.a)(T.a.mark((function e(t,a){var r,n,c,i,s,o,u;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!==(r=t.headers)&&void 0!==r?r:{},s=t.data,null===(n=i["content-type"])||void 0===n?void 0:n.includes("application/x-www-form-urlencoded"))for(o in s="",t.data)s&&(s+="&"),s+="".concat(o,"=").concat(t.data[o]);return e.next=5,E({url:"https://cors.bridged.cc/".concat(t.url).concat(null!==(c=t.param)&&void 0!==c?c:""),method:t.method,headers:i,data:s,timeout:this.requestTimeout||0});case 5:return u=e.sent,e.abrupt("return",Promise.resolve(createResponseObject({data:u.data,status:u.status,headers:u.headers,request:t})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},e}return a}(S.Source),I="https://nhentai.net",R={version:"2.0.1",name:"nHentai",description:"Extension which pulls 18+ content from nHentai. (Literally all of it. We know why you're here)",author:"VibrantClouds",authorWebsite:"https://github.com/conradweiser",icon:"logo.png",hentaiSource:!1,sourceTags:[{text:"18+",type:S.TagType.YELLOW}],websiteBaseURL:I},A=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"getMangaUrl",value:function(e){return"https://cubari.moe/g/".concat(e,"/")}},{key:"getSourceDetails",value:function(){return R}},{key:"convertLanguageToCode",value:function(e){switch(e.toLowerCase()){case"english":return S.LanguageCode.ENGLISH;case"japanese":return S.LanguageCode.JAPANESE;case"chinese":return S.LanguageCode.CHINEESE;default:return S.LanguageCode.UNKNOWN}}},{key:"getMangaDetails",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n,c,i,s,o,u,l,d,h,p,f,g,m,v,b,y,x,j,O,k,w;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=createRequestObject({url:"".concat(I,"/g/").concat(t),method:"GET"}),e.next=3,this.requestManager.schedule(o,1);case 3:u=e.sent,l=this.cheerio.load(u.data),d=null!==(a=l("[itemprop=image]").attr("content"))&&void 0!==a?a:"",h=null!==(r=l("[itemprop=name]").attr("content"))&&void 0!==r?r:"",p=[createTagSection({id:"0",label:"tag",tags:[]})],f=null!==(n=null===(c=l('meta[name="twitter:description"]').attr("content"))||void 0===c?void 0:c.split(","))&&void 0!==n?n:[],p[0].tags=f.map((function(e){return createTag({id:e.trim(),label:e.trim()})})),h=h.replace(/(\[.+?\])/g,"").trim(),g=[h],m=l("#info"),v=null!==(i=l("h1",m).text())&&void 0!==i?i:"",b=null!==(s=l("h2",m).text())&&void 0!==s?s:"",v&&g.push(v.trim()),b&&g.push(b.trim()),y=l("#info-block"),x="",j=Object(M.a)(l(".tag-container",y).toArray());try{for(j.s();!(O=j.n()).done;)k=O.value,l(k).text().indexOf("Artists")>-1?(w=l("a",k).text(),x=w.substring(0,w.search(/\d/))):l(k).text().indexOf("Languages")}catch(T){j.e(T)}finally{j.f()}return 1,e.abrupt("return",createManga({id:t,titles:g,image:d,rating:0,status:1,artist:x,tags:p,hentai:!1}));case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChapters",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n,c,i,s,o,u,l,d,h,p,f;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=createRequestObject({url:"".concat(I,"/g/").concat(t),method:"GET"}),e.next=3,this.requestManager.schedule(n,1);case 3:c=e.sent,i=this.cheerio.load(c.data),s=[],o=null!==(a=i("[itemprop=name]").attr("content"))&&void 0!==a?a:"",u=new Date(null!==(r=i("time").attr("datetime"))&&void 0!==r?r:""),o=o.replace(/(\[.+?\])/g,"").trim(),l=S.LanguageCode.UNKNOWN,d=Object(M.a)(i(".tag-container").toArray()),e.prev=11,d.s();case 13:if((h=d.n()).done){e.next=32;break}if(p=h.value,!(i(p).text().indexOf("Languages")>-1)){e.next=30;break}if(!(f=i("span",p).text()).includes("japanese")){e.next=22;break}return l=S.LanguageCode.JAPANESE,e.abrupt("break",32);case 22:if(!f.includes("english")){e.next=27;break}return l=S.LanguageCode.ENGLISH,e.abrupt("break",32);case 27:if(!f.includes("chinese")){e.next=30;break}return l=S.LanguageCode.CHINEESE,e.abrupt("break",32);case 30:e.next=13;break;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(11),d.e(e.t0);case 37:return e.prev=37,d.f(),e.finish(37);case 40:return s.push(createChapter({id:"1",mangaId:t,name:o,chapNum:1,time:u,langCode:l})),e.abrupt("return",s);case 42:case"end":return e.stop()}}),e,this,[[11,34,37,40]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getChapterDetails",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a){var r,n,c,i,s,o,u,l,d,h,p,f,g,m;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=createRequestObject({url:"".concat(I,"/g/").concat(t),method:"GET"}),e.next=3,this.requestManager.schedule(r,1);case 3:n=e.sent,c=this.cheerio.load(n.data),i=[],s=c("#thumbnail-container"),o=c("img",s).attr("data-src"),u=parseInt(null===o||void 0===o?void 0:o.match(/.*\/(\d*)\//)[1]),l=1,d=Object(M.a)(c(c("img",".thumb-container")).toArray());try{for(d.s();!(h=d.n()).done;)f=h.value,g=null===(p=c(f).attr("data-src"))||void 0===p?void 0:p.match(/\.([png|jpg]{3,3})/g)[0],i.push("https://i.nhentai.net/galleries/".concat(u,"/").concat(l).concat(g)),l++}catch(v){d.e(v)}finally{d.f()}return m=createChapterDetails({id:a,mangaId:t,pages:i,longStrip:!1}),e.abrupt("return",m);case 14:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"searchRequest",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a){var r,n,c,i,s,o,u,l,d,h,p,f,g,m,v,b,y,x,j,O,k,w,N,S,E;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!==(r=a)&&void 0!==r?r:{},i=null!==(n=a.page)&&void 0!==n?n:1,s=!1,!1!==t.hStatus&&t.title){e.next=5;break}return e.abrupt("return",createPagedResults({results:[]}));case 5:return o=void 0,(null===(c=t.title)||void 0===c?void 0:c.match(/\d{5,6}/))?(o=createRequestObject({url:"".concat(I,"/g/").concat(t.title),method:"GET"}),s=!0):(t.title=null===(u=t.title)||void 0===u?void 0:u.trim(),t.title=t.title.replace(" ","+")+"+",o=createRequestObject({url:"".concat(I,"/search/?q=").concat(t.title,"+english&page=").concat(i),method:"GET"}),s=!1),e.next=9,this.requestManager.schedule(o,1);case 9:if(l=e.sent,d=this.cheerio.load(l.data),h=[],!s){e.next=20;break}return g=d("#bigcontainer"),m=d("a",g).attr("href"),v=parseInt(null===m||void 0===m?void 0:m.match(/g\/(\d*)\/\d/)[1]),b=(b=null!==(p=d("[itemprop=name]").attr("content"))&&void 0!==p?p:"").replace(/(\[.+?\])/g,"").trim(),h.push(createMangaTile({id:v.toString(),title:createIconText({text:b}),image:null!==(f=d("[itemprop=image]").attr("content"))&&void 0!==f?f:""})),e.abrupt("return",createPagedResults({results:h}));case 20:y=d(".index-container"),x=Object(M.a)(d(".gallery",y).toArray());try{for(x.s();!(j=x.n()).done;)k=j.value,w=d(k),void 0===(N=d("img",w).attr("data-src"))&&(N="http:"+d("img",w).attr("src")),S=d(".caption",w).text(),E=null===(O=d("a",w).attr("href"))||void 0===O?void 0:O.match(/\/(\d*)\//),S=S.replace(/(\[.+?\])/g,"").trim(),h.push(createMangaTile({id:E[1],title:createIconText({text:S}),image:N}))}catch(T){x.e(T)}finally{x.f()}return d("a.last")?a.page=++i:a=void 0,e.abrupt("return",createPagedResults({results:h,metadata:a}));case 25:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getHomePageSections",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n,c,i,s,o,u,l,d,h,p,f,g,m,v,b,y,x,j,O,k,w,N;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=createHomeSection({id:"popular",title:"Popular Now"}),r=createHomeSection({id:"new",title:"New Uploads",view_more:!0}),t(a),t(r),n=createRequestObject({url:"".concat(I,"/language/english"),method:"GET"}),e.next=7,this.requestManager.schedule(n,1);case 7:c=e.sent,i=[],s=[],o=this.cheerio.load(c.data),u=o(".index-container").first(),l=Object(M.a)(o(".gallery",u).toArray());try{for(l.s();!(d=l.n()).done;)p=d.value,f=o(p),void 0===(g=o("img",f).attr("data-src"))&&(g="http:"+o("img",f).attr("src")),m=(m=o(".caption",f).text()).replace(/(\[.+?\])/g,"").trim(),v=null===(h=o("a",f).attr("href"))||void 0===h?void 0:h.match(/\/(\d*)\//),i.push(createMangaTile({id:v[1],title:createIconText({text:m}),image:g}))}catch(T){l.e(T)}finally{l.f()}a.items=i,t(a),u=o(".index-container").last(),b=Object(M.a)(o(".gallery",u).toArray());try{for(b.s();!(y=b.n()).done;)j=y.value,O=o(j),void 0===(k=o("img",O).attr("data-src"))&&(k="http:"+o("img",O).attr("src")),w=(w=o(".caption",O).text()).replace(/(\[.+?\])/g,"").trim(),N=null===(x=o("a",O).attr("href"))||void 0===x?void 0:x.match(/\/(\d*)\//),s.push(createMangaTile({id:N[1],title:createIconText({text:w}),image:k}))}catch(T){b.e(T)}finally{b.f()}r.items=s,t(r);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getViewMoreItems",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a){var r,n,c,i,s,o,u,l,d,h,p,f,g,m,v,b;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null!==(r=a)&&void 0!==r?r:{},c=null!==(n=a.page)&&void 0!==n?n:1,i=createRequestObject({url:"".concat(I,"/?page=").concat(c),method:"GET"}),e.next=5,this.requestManager.schedule(i,1);case 5:s=e.sent,o=this.cheerio.load(s.data),u=[],l=o(".index-container"),d=Object(M.a)(o(".gallery",l).toArray());try{for(d.s();!(h=d.n()).done;)f=h.value,g=o(f),void 0===(m=o("img",g).attr("data-src"))&&(m="http:"+o("img",g).attr("src")),v=(v=o(".caption",g).text()).replace(/(\[.+?\])/g,"").trim(),b=null===(p=o("a",g).attr("href"))||void 0===p?void 0:p.match(/\/(\d*)\//),u.push(createMangaTile({id:b[1],title:createIconText({text:v}),image:m}))}catch(t){d.e(t)}finally{d.f()}return o("a.last")?a.page=++c:a=void 0,e.abrupt("return",createPagedResults({results:u,metadata:a}));case 13:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),a}(q),C=function(e,t){var a,r=e("h1.heading").first().text().trim(),n=[];n.push(r),e("div.alt_name").text().trim().replace(" ","").split(";").forEach((function(e){n.push(e)}));var c=null!==(a=e("div.media div.cover img").attr("src"))&&void 0!==a?a:"",i=e(".author").text().trim(),s=e(".summary > p").text().trim(),o=e(".value.status").text().trim(),u=!1,l=[];e(".genres > a").each((function(t,a){var r,n,c=e(a).text().trim(),i=null!==(r=null===(n=e(a).attr("href"))||void 0===n?void 0:n.split("genre/")[1])&&void 0!==r?r:"";["Adult","Smut","Mature"].includes(c)&&(u=!0),l.push({id:i,label:c})}));var d=[createTagSection({id:"0",label:"genres",tags:l.map((function(e){return createTag(e)}))})],h=S.MangaStatus.ONGOING;switch(o){case"Ongoing":h=S.MangaStatus.ONGOING;break;case"Completed":h=S.MangaStatus.COMPLETED;break;default:h=S.MangaStatus.ONGOING}return createManga({id:t,titles:n,image:c,rating:0,status:h,author:i,artist:"",tags:d,desc:s,hentai:u})},L=function(e,t){var a,r=[],n=new RegExp("c([0-9.]+)"),c=Object(M.a)(e("tr:has(.chapter)").toArray());try{for(c.s();!(a=c.n()).done;){var i,s,o,u=a.value,l=e("a",u).text(),d=new Date(null!==(i=e(".update_time",u).text())&&void 0!==i?i:""),h=null!==(s=null===(o=e("a",u).attr("href"))||void 0===o?void 0:o.split("/").pop())&&void 0!==s?s:"",p=Number("0"+h.match(n)[1]);isNaN(p)||r.push(createChapter({id:h,mangaId:t,name:l,langCode:S.LanguageCode.ENGLISH,chapNum:p,time:d}))}}catch(f){c.e(f)}finally{c.f()}return r},_=function(e,t,a){var r,n=[],c=RegExp("var ytaw=\\[([^\\[]*)]"),i=Object(M.a)(e("script").toArray());try{for(i.s();!(r=i.n()).done;){var s,o=null===(s=r.value.children[0])||void 0===s?void 0:s.data;if("undefined"!==typeof o&&o.includes("var ytaw=")){var u,l=o.match(c)[1].replace(/''?/g,"").split(","),d=Object(M.a)(l);try{for(d.s();!(u=d.n()).done;){var h=u.value;""!==h&&n.push(h)}}catch(p){d.e(p)}finally{d.f()}}}}catch(p){i.e(p)}finally{i.f()}return createChapterDetails({id:a,mangaId:t,pages:n,longStrip:!1})},D=function(e){var t,a=[createTagSection({id:"0",label:"genres",tags:[]})],r=Object(M.a)(e(".wrap_item").toArray());try{for(r.s();!(t=r.n()).done;){var n,c,i=t.value,s=e("a",i).first().text().trim(),o=null!==(n=null===(c=e("a",i).attr("href"))||void 0===c?void 0:c.split("genre/")[1])&&void 0!==n?n:"";a[0].tags.push(createTag({id:o,label:s}))}}catch(u){r.e(u)}finally{r.f()}return a},U=function(e,t,a){var r,n=[],c=!0,i=Object(M.a)(e("div.item","div#book_list").toArray());try{for(i.s();!(r=i.n()).done;){var s,o,u=r.value,l=null!==(s=null===(o=e("a",u).attr("href"))||void 0===o?void 0:o.split("/").pop())&&void 0!==s?s:"";new Date(e(".update_time",u).first().text())>t?a.includes(l)&&n.push(l):c=!1}}catch(d){i.e(d)}finally{i.f()}return{ids:n,loadMore:c}},G=function(e,t,a){var r,n=Object(M.a)(t);try{for(n.s();!(r=n.n()).done;){a(r.value)}}catch(P){n.e(P)}finally{n.f()}var c,i=[],s=Object(M.a)(e("div.item","div#hot_update").toArray());try{for(s.s();!(c=s.n()).done;){var o,u,l,d=c.value,h=e(".title",d).text().trim(),p=null!==(o=null===(u=e("a",d).attr("href"))||void 0===u?void 0:u.split("/").pop())&&void 0!==o?o:"",f=null!==(l=e("img",d).first().attr("src"))&&void 0!==l?l:"",g=e(".chapter",d).first().text().trim();p&&h&&i.push(createMangaTile({id:p,image:f,title:createIconText({text:h}),subtitleText:createIconText({text:g})}))}}catch(P){s.e(P)}finally{s.f()}t[0].items=i,a(t[0]);var m,v=[],b=Object(M.a)(e("div.item","div#hot_book").toArray());try{for(b.s();!(m=b.n()).done;){var y,x,j,O=m.value,k=e(".title",O).text().trim(),w=null!==(y=null===(x=e("a",O).attr("href"))||void 0===x?void 0:x.split("/").pop())&&void 0!==y?y:"",T=null!==(j=e("img",O).attr("data-src"))&&void 0!==j?j:"",N=e(".chapter",O).first().text().trim();w&&k&&v.push(createMangaTile({id:w,image:T,title:createIconText({text:k}),subtitleText:createIconText({text:N})}))}}catch(P){b.e(P)}finally{b.f()}t[1].items=v,a(t[1]);var S,E=[],q=Object(M.a)(e("div.item","div#book_list").toArray());try{for(q.s();!(S=q.n()).done;){var I,R,A,C=S.value,L=e(".title",C).text().trim(),_=null!==(I=null===(R=e("a",C).attr("href"))||void 0===R?void 0:R.split("/").pop())&&void 0!==I?I:"",D=null!==(A=e("img",C).first().attr("src"))&&void 0!==A?A:"",U=e(".chapter",C).first().text().trim();_&&L&&E.push(createMangaTile({id:_,image:D,title:createIconText({text:L}),subtitleText:createIconText({text:U})}))}}catch(P){q.e(P)}finally{q.f()}t[2].items=E,a(t[2]);var G,H=Object(M.a)(t);try{for(H.s();!(G=H.n()).done;){a(G.value)}}catch(P){H.e(P)}finally{H.f()}},H=function(e){var t,a;return null!==(t=null===(a=e.title)||void 0===a?void 0:a.replace(" ","+"))&&void 0!==t?t:""},P=function(e){var t=[];try{var a;if(null===(a=e('meta[property="$=url"]').attr("content"))||void 0===a?void 0:a.includes("/manga/")){var r,n,c,i,s,o=null!==(r=e("h1.heading").first().text().trim())&&void 0!==r?r:"",u=null!==(n=null===(c=e('meta[property$=url]"]').attr("content"))||void 0===c||null===(i=c.split("/"))||void 0===i?void 0:i.pop())&&void 0!==n?n:"",l=null!==(s=e("div.media div.cover img").attr("src"))&&void 0!==s?s:"";u&&o&&t.push(createMangaTile({id:u,image:l,title:createIconText({text:o})}))}else{var d,h=[],p=Object(M.a)(e("div.item","#book_list").toArray());try{for(p.s();!(d=p.n()).done;){var f,g,m,v=d.value,b=e(".title a",v).text().trim(),y=null!==(f=null===(g=e("a",v).attr("href"))||void 0===g?void 0:g.split("/").pop())&&void 0!==f?f:"",x=null!==(m=e("img",v).attr("src"))&&void 0!==m?m:"",j=e(".chapter",v).first().text().trim();!h.includes(y)&&y&&b&&(t.push(createMangaTile({id:y,image:x,title:createIconText({text:b}),subtitleText:createIconText({text:j})})),h.push(y))}}catch(O){p.e(O)}finally{p.f()}}}catch(k){console.log(k)}return t},z=function(e,t){var a,r=[],n=Object(M.a)(e("div.item","div#book_list").toArray());try{for(n.s();!(a=n.n()).done;){var c,i,s,o=a.value,u=e(".title a",o).text().trim(),l=null!==(c=null===(i=e("a",o).attr("href"))||void 0===i?void 0:i.split("/").pop())&&void 0!==c?c:"",d=null!==(s=e("img",o).attr("src"))&&void 0!==s?s:"",h=e(".chapter",o).first().text().trim();l&&u&&r.push(createMangaTile({id:l,image:d,title:createIconText({text:u}),subtitleText:createIconText({text:h})}))}}catch(p){n.e(p)}finally{n.f()}return r},J=function(e){var t=!0;return Boolean(e("a.next.page-numbers","ul.uk-pagination").text())&&(t=!1),t},B="https://mangakatana.com",W="GET",K={"content-type":"application/x-www-form-urlencoded"},Q={version:"1.0.3",name:"MangaKatana",icon:"icon.png",author:"Netsky",authorWebsite:"https://github.com/TheNetsky",description:"Extension that pulls manga from MangaKatana.",hentaiSource:!1,websiteBaseURL:B,sourceTags:[{text:"Notifications",type:S.TagType.GREEN},{text:"Buggy",type:S.TagType.RED}]},V=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"getMangaShareUrl",value:function(e){return"".concat(B,"/manga/").concat(e)}},{key:"getMangaUrl",value:function(e){return"https://cubari.moe/mk/".concat(B,"/manga/").concat(e)}},{key:"getSourceDetails",value:function(){return Q}},{key:"getMangaDetails",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=createRequestObject({url:"".concat(B,"/manga/"),method:W,param:t}),e.next=3,this.requestManager.schedule(a,1);case 3:return r=e.sent,n=this.cheerio.load(r.data),e.abrupt("return",C(n,t));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChapters",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=createRequestObject({url:"".concat(B,"/manga/"),method:W,param:t}),e.next=3,this.requestManager.schedule(a,1);case 3:return r=e.sent,n=this.cheerio.load(r.data),e.abrupt("return",L(n,t));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChapterDetails",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a){var r,n,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=createRequestObject({url:"".concat(B,"/manga/").concat(t,"/").concat(a),method:"GET"}),e.next=3,this.requestManager.schedule(r,1);case 3:return n=e.sent,c=this.cheerio.load(n.data,{xmlMode:!1}),e.abrupt("return",_(c,t,a));case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getTags",value:function(){var e=Object(N.a)(T.a.mark((function e(){var t,a,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=createRequestObject({url:"".concat(B,"/genres"),method:W}),e.next=3,this.requestManager.schedule(t,1);case 3:return a=e.sent,r=this.cheerio.load(a.data),e.abrupt("return",D(r));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"filterUpdatedManga",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a,r){var n,c,i,s,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=1,c={ids:[],loadMore:!0};case 2:if(!c.loadMore){e.next=12;break}return i=createRequestObject({url:"".concat(B,"/latest/page/").concat(n++),method:W}),e.next=6,this.requestManager.schedule(i,1);case 6:s=e.sent,o=this.cheerio.load(s.data),(c=U(o,a,r)).ids.length>0&&t(createMangaUpdates({ids:c.ids})),e.next=2;break;case 12:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"getHomePageSections",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n,c,i,s,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=createHomeSection({id:"hot_update",title:"Hot Updates"}),r=createHomeSection({id:"hot_manga",title:"Hot Manga",view_more:!0}),n=createHomeSection({id:"latest_updates",title:"Latest Updates",view_more:!0}),c=[a,r,n],i=createRequestObject({url:B,method:W}),e.next=7,this.requestManager.schedule(i,1);case 7:s=e.sent,o=this.cheerio.load(s.data),G(o,c,t);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getViewMoreItems",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a){var r,n,c,i,s,o,u,l;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=null!==(r=null===(n=a)||void 0===n?void 0:n.page)&&void 0!==r?r:1,i="",e.t0=t,e.next="hot_manga"===e.t0?5:"latest_updates"===e.t0?7:9;break;case 5:return i="/new-manga/page/".concat(c),e.abrupt("break",11);case 7:return i="/latest/page/".concat(c),e.abrupt("break",11);case 9:return e.abrupt("return",Promise.resolve(null));case 11:return s=createRequestObject({url:"".concat(B),method:W,param:i}),e.next=14,this.requestManager.schedule(s,1);case 14:return o=e.sent,u=this.cheerio.load(o.data),l=z(u),a=J(u)?void 0:{page:c+1},e.abrupt("return",createPagedResults({results:l,metadata:a}));case 19:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"searchRequest",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a){var r,n,c,i,s,o,u,l;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=null!==(r=null===(n=a)||void 0===n?void 0:n.page)&&void 0!==r?r:1,i=H(t),s=createRequestObject({url:B,method:W,headers:K,param:"/page/".concat(c,"?search=").concat(i,"&search_by=book_name")}),e.next=5,this.requestManager.schedule(s,1);case 5:return o=e.sent,u=this.cheerio.load(o.data),l=P(u),a=J(u)?void 0:{page:c+1},e.abrupt("return",createPagedResults({results:l,metadata:a}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),a}(q),Y=a(90),$="https://guya.moe",F="".concat($,"/api/series"),X="".concat($,"/api/get_all_series/"),Z={version:"1.1.1",name:"Guya",icon:"icon.png",author:"funkyhippo",authorWebsite:"https://github.com/funkyhippo",description:"Extension that pulls manga from guya.moe",language:"en",hentaiSource:!1,websiteBaseURL:$},ee=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"getSourceDetails",value:function(){return Z}},{key:"getMangaUrl",value:function(e){return"https://guya.moe/read/manga/".concat(e,"/")}},{key:"getMangaDetails",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n,c,i,s;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=createRequestObject({metadata:{mangaId:t},url:X,method:"GET"}),e.next=3,this.requestManager.schedule(a,1);case 3:for(i in r=e.sent,n="string"===typeof r.data?JSON.parse(r.data):r.data,c=[],n)s=n[i],t.includes(s.slug)&&c.push(createManga({id:s.slug,titles:[i],image:"".concat($,"/").concat(s.cover),rating:5,status:S.MangaStatus.ONGOING,artist:s.artist,author:s.author,desc:s.description}));return e.abrupt("return",c[0]);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChapters",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n,c,i,s,o,u,l;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=createRequestObject({metadata:{mangaId:t},url:"".concat(F,"/").concat(t,"/"),method:"GET"}),e.next=3,this.requestManager.schedule(a,1);case 3:for(o in r=e.sent,n="string"===typeof r.data?JSON.parse(r.data):r.data,c=n.chapters,i=n.groups,s=[],c)for(l in(u=c[o]).groups)s.push(createChapter({id:"".concat(o).concat("|").concat(l),mangaId:t,chapNum:Number(o),langCode:S.LanguageCode.ENGLISH,name:u.title,volume:u.volume,group:i[l],time:new Date(1e3*Number(u.release_date[l]))}));return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChapterDetails",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a){var r,n,c,i,s,o,u,l;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=createRequestObject({url:"".concat(F,"/").concat(t,"/"),method:"GET"}),e.next=3,this.requestManager.schedule(r,1);case 3:return n=e.sent,c="string"===typeof n.data?JSON.parse(n.data):n.data,i=c.chapters,s=a.split("|"),o=Object(Y.a)(s,2),u=o[0],l=o[1],e.abrupt("return",createChapterDetails({id:a,longStrip:!1,mangaId:t,pages:i[u].groups[l].map((function(e){return"".concat($,"/media/manga/").concat(t,"/chapters/").concat(i[u].folder,"/").concat(l,"/").concat(e)}))}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"searchRequest",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a){var r,n,c,i,s,o,u;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=createRequestObject({url:X,method:"GET"}),e.next=3,this.requestManager.schedule(n,1);case 3:return c=e.sent,i="string"===typeof c.data?JSON.parse(c.data):c.data,s=null!==(r=t.title)&&void 0!==r?r:"",o=Object.keys(i).filter((function(e){return e.toLowerCase().includes(s.toLowerCase())})),u=o.map((function(e){var t=i[e];return createMangaTile({id:t.slug,image:"".concat($,"/").concat(t.cover),title:createIconText({text:e})})})),e.abrupt("return",createPagedResults({results:u}));case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getHomePageSections",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n,c,i,s,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=createHomeSection({id:"all_guya",title:"ALL GUYA"}),t(a),r=createRequestObject({url:X,method:"GET"}),e.next=5,this.requestManager.schedule(r,1);case 5:for(s in n=e.sent,c="string"===typeof n.data?JSON.parse(n.data):n.data,i=[],c)o=c[s],i.push(createMangaTile({id:o.slug,image:"".concat($,"/").concat(o.cover),title:createIconText({text:s})}));a.items=i,t(a);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"filterUpdatedManga",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a,r){var n,c,i,s,o,u;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=createRequestObject({url:X,method:"GET"}),e.next=3,this.requestManager.schedule(n,1);case 3:for(o in c=e.sent,i="string"===typeof c.data?JSON.parse(c.data):c.data,s=[],i)u=i[o],new Date(1e3*u.last_updated)>=a&&r.includes(o)&&s.push(o);t(createMangaUpdates({ids:s}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"getMangaShareUrl",value:function(e){return"".concat($,"/read/manga/").concat(e,"/")}}]),a}(q),te=function(e,t){var a,r,n,c,i=e(".manga-info-top"),s=null!==(a=e("h1",i).first().text())&&void 0!==a?a:"",o=null!==(r=e(".manga-info-pic",i).children().first().attr("src"))&&void 0!==r?r:"",u=e(".manga-info-text",i),l="",d=e(".manga-info-text li:nth-child(2)").text().replace("Author(s) :","").replace(/\r?\n|\r/g,"").split(", ");d[d.length-1]=null===(n=d[d.length-1])||void 0===n?void 0:n.replace(", ",""),c=d[0],d.length>1&&" "!==e(d[1]).text()&&(l=d[1]);var h=Number(e("#rate_row_cmd",u).text().replace("Mangakakalot.com rate : ","").slice(e("#rate_row_cmd",u).text().indexOf("Mangakakalot.com rate : "),e("#rate_row_cmd",u).text().indexOf(" / 5"))),p="Ongoing"===e(".manga-info-text li:nth-child(3)").text().split(" ").pop()?S.MangaStatus.ONGOING:S.MangaStatus.COMPLETED,f=[s],g=Number(e("#rate_row_cmd",u).text().replace(" votes","").split(" ").pop()),m=Number(e(".manga-info-text li:nth-child(6)").text().replace(/,/g,"").replace("View : ","")),v=[createTagSection({id:"0",label:"genres",tags:[]})],b=e(".manga-info-text li:nth-child(7)").find("a").toArray(),y=[];y=Array.from(b,(function(t){return e(t).text()})),v[0].tags=y.map((function(e){return createTag({id:e,label:e})}));var x,j=Object(M.a)(e("li",u).toArray());try{for(j.s();!(x=j.n()).done;){var O=x.value;if(e(O).find(".story-alternative").length>0){var k,w=e("h2",u).text().replace("Alternative : ","").split(/,|;/),T=Object(M.a)(w);try{for(T.s();!(k=T.n()).done;){var N=k.value;f.push(N.trim())}}catch(I){T.e(I)}finally{T.f()}}}}catch(I){j.e(I)}finally{j.f()}var E=new Date(e(".manga-info-text li:nth-child(4)").text().replace(/((AM)*(PM)*)/g,"").replace("Last updated : ","")).toDateString(),q=e("#noidungm",e(".leftCol")).clone().children().remove().end().text().replace(/^\s+|\s+$/g,"");return createManga({id:t,titles:f,image:o,rating:Number(h),status:p,artist:l,author:c,tags:v,views:m,follows:g,lastUpdate:E,desc:q,hentai:!1})},ae=function(e,t){var a,r=e(".chapter-list",".leftCol"),n=[],c=Object(M.a)(e(".row",r).toArray());try{for(c.s();!(a=c.n()).done;){var i,s,o,u=a.value,l=null!==(i=e("a",u).attr("href"))&&void 0!==i?i:"",d=null!==(s=e("a",u).text())&&void 0!==s?s:"",h=Number(l.split("_").pop()),p=new Date(null!==(o=e("span:nth-child(3)",u).attr("title"))&&void 0!==o?o:"");n.push(createChapter({id:l,mangaId:t,name:d,langCode:S.LanguageCode.ENGLISH,chapNum:h,time:p}))}}catch(f){c.e(f)}finally{c.f()}return n},re=function(e,t,a){var r,n=[],c=e("img",".container-chapter-reader").toArray(),i=Object(M.a)(c);try{for(i.s();!(r=i.n()).done;){var s=e(r.value).attr("src");"undefined"!==typeof s&&n.push(s)}}catch(o){i.e(o)}finally{i.f()}return createChapterDetails({id:a,mangaId:t,pages:n,longStrip:!1})},ne=function(e,t,a){var r,n=Object(M.a)(t);try{for(n.s();!(r=n.n()).done;){a(r.value)}}catch(j){n.e(j)}finally{n.f()}var c,i=[],s=[],o=Object(M.a)(e(".item",".owl-carousel").toArray());try{for(o.s();!(c=o.n()).done;){var u=c.value,l=e("a",u).first().attr("href"),d=e("img",u).attr("src"),h=e("div.slide-caption",u).children().first().text(),p=e("div.slide-caption",u).children().last().text();"undefined"!==typeof l&&"undefined"!==typeof d&&i.push(createMangaTile({id:l,image:d,title:createIconText({text:h}),subtitleText:createIconText({text:p})}))}}catch(j){o.e(j)}finally{o.f()}var f,g=Object(M.a)(e(".first",".doreamon").toArray());try{for(g.s();!(f=g.n()).done;){var m=f.value,v=e("a",m).first().attr("href"),b=e("img",m).attr("src");"undefined"!==typeof v&&"undefined"!==typeof b&&s.push(createMangaTile({id:v,image:b,title:createIconText({text:e("h3",m).text()}),subtitleText:createIconText({text:e(".sts_1",m).first().text()})}))}}catch(j){g.e(j)}finally{g.f()}t[0].items=i,t[1].items=s;var y,x=Object(M.a)(t);try{for(x.s();!(y=x.n()).done;){a(y.value)}}catch(j){x.e(j)}finally{x.f()}},ce=function(e,t,a){var r,n=Object(M.a)(t);try{for(n.s();!(r=n.n()).done;){a(r.value)}}catch(s){n.e(s)}finally{n.f()}t[0].items=ie(e);var c,i=Object(M.a)(t);try{for(i.s();!(c=i.n()).done;){a(c.value)}}catch(s){i.e(s)}finally{i.f()}},ie=function(e){var t,a=[],r=e(".truyen-list"),n=Object(M.a)(e(".list-truyen-item-wrap",r).toArray());try{for(n.s();!(t=n.n()).done;){var c,i,s=t.value,o=e("a",s).first().attr("href"),u=e("img",s).first().attr("src"),l=null!==(c=e("a",s).first().attr("title"))&&void 0!==c?c:"",d=null!==(i=e(".list-story-item-wrap-chapter",s).attr("title"))&&void 0!==i?i:"";"undefined"!==typeof o&&"undefined"!==typeof u&&a.push(createMangaTile({id:o,image:u,title:createIconText({text:l}),subtitleText:createIconText({text:d})}))}}catch(h){n.e(h)}finally{n.f()}return a},se=function(e){var t,a,r=(null!==(t=e.title)&&void 0!==t?t:"").replace(/ /g,"_");return e.author&&(r+=(null!==(a=e.author)&&void 0!==a?a:"").replace(/ /g,"_")),"".concat(r)},oe=function(e){var t,a=[],r=e(".panel_story_list"),n=e(".story_item",r).toArray(),c=Object(M.a)(n);try{for(c.s();!(t=c.n()).done;){var i,s,o=t.value,u=null!==(i=e("a",o).first().attr("href"))&&void 0!==i?i:"",l=e(".story_name",o).children().first().text(),d=e(".story_chapter",o).first().text().trim(),h=null!==(s=e("img",o).attr("src"))&&void 0!==s?s:"",p=new Date(e(".story_item_right span:nth-child(5)",o).text().replace(/((AM)*(PM)*)/g,"").replace("Updated : ","")).toDateString();a.push(createMangaTile({id:u,image:h,title:createIconText({text:l}),subtitleText:createIconText({text:d}),secondaryText:createIconText({text:p,icon:"clock.fill"})}))}}catch(f){c.e(f)}finally{c.f()}return a},ue=function(e){var t,a=e(".panel-category").find("a").clone().remove(".ctg-select").toArray(),r=createTagSection({id:"genre",label:"Genre",tags:[]}),n=Object(M.a)(a);try{for(n.s();!(t=n.n()).done;){var c=e(t.value).text();r.tags.push(createTag({id:c,label:c}))}}catch(i){n.e(i)}finally{n.f()}return[r]},le=function(e){return ie(e)},de=function(e){var t,a=e(".page_select").text(),r=e(".page_last").text();return!a||+(r=(null!==(t=/(\d+)/g.exec(r))&&void 0!==t?t:[""])[0])===+a},he=function(e,t){var a,r,n,c,i,s=e(".panel-story-info"),o=null!==(a=e(".img-loading",s).attr("title"))&&void 0!==a?a:"",u=null!==(r=e(".img-loading",s).attr("src"))&&void 0!==r?r:"",l=e(".variations-tableInfo",s),d="",h="",p=S.MangaStatus.ONGOING,f=[o],g=0,m="",v=[createTagSection({id:"0",label:"genres",tags:[]})],b=Object(M.a)(e("tr",l).toArray());try{for(b.s();!(i=b.n()).done;){var y=i.value;if(e(y).find(".info-alternative").length>0){var x,j=e("h2",l).text().split(/,|;/),O=Object(M.a)(j);try{for(O.s();!(x=O.n()).done;){var k=x.value;f.push(k.trim())}}catch(_){O.e(_)}finally{O.f()}}else if(e(y).find(".info-author").length>0){var w=e(".table-value",y).find("a").toArray();d=e(w[0]).text(),w.length>1&&(h=e(w[1]).text())}else if(e(y).find(".info-status").length>0)p="Ongoing"===e(".table-value",y).text()?S.MangaStatus.ONGOING:S.MangaStatus.COMPLETED;else if(e(y).find(".info-genres").length>0){var T,N=e(".table-value",y).find("a").toArray(),E=[],q=Object(M.a)(N);try{for(q.s();!(T=q.n()).done;){var I=e(T.value).text();E.push(I)}}catch(_){q.e(_)}finally{q.f()}}}}catch(_){b.e(_)}finally{b.f()}l=e(".story-info-right-extent",s);var R,A=Object(M.a)(e("p",l).toArray());try{for(A.s();!(R=A.n()).done;){var C=R.value;if(e(C).find(".info-time").length>0)m=new Date(e(".stre-value",C).text().replace(/(-*(AM)*(PM)*)/g,"")).toDateString();else e(C).find(".info-view").length>0&&(g=Number(e(".stre-value",C).text().replace(/,/g,"")))}}catch(_){A.e(_)}finally{A.f()}n=Number(e("[property=v\\:average]",l).text()),c=Number(e("[property=v\\:votes]",l).text());var L=e(".panel-story-info-description",s).text();return createManga({id:t,titles:f,image:u,rating:Number(n),status:p,artist:h,author:d,tags:v,views:g,follows:c,lastUpdate:m,desc:L,hentai:!1})},pe=function(e,t){var a,r=e(".row-content-chapter",".body-site"),n=[],c=Object(M.a)(e("li",r).toArray());try{for(c.s();!(a=c.n()).done;){var i,s,o,u,l,d=a.value,h=null!==(i=e("a",d).attr("href"))&&void 0!==i?i:"",p=null!==(s=e("a",d).text())&&void 0!==s?s:"",f=Number(null!==(o=(null!==(u=/Chapter (\d*)/g.exec(p))&&void 0!==u?u:[])[1])&&void 0!==o?o:""),g=new Date(null!==(l=e(".chapter-time",d).attr("title"))&&void 0!==l?l:"");n.push(createChapter({id:h,mangaId:t,name:p,langCode:S.LanguageCode.ENGLISH,chapNum:f,time:g}))}}catch(m){c.e(m)}finally{c.f()}return n},fe=function(e,t,a){var r=Array.from(e("img",".container-chapter-reader").toArray(),(function(t){var a;return null!==(a=e(t).attr("src"))&&void 0!==a?a:""}));return createChapterDetails({id:a,mangaId:t,pages:r,longStrip:!1})},ge="https://mangakakalot.com",me="https://manganelo.com",ve="GET",be={Referer:me,"content-type":"application/x-www-form-urlencoded"},ye={version:"2.0.4",name:"Mangakakalot",icon:"mangakakalot.com.png",author:"getBoolean",authorWebsite:"https://github.com/getBoolean",description:"Extension that pulls manga from Mangakakalot",hentaiSource:!1,websiteBaseURL:ge,sourceTags:[{text:"Notifications",type:S.TagType.GREEN}]},xe=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"getMangaUrl",value:function(e){return"https://cubari.moe/mb/".concat(e)}},{key:"getSourceDetails",value:function(){return ye}},{key:"getMangaShareUrl",value:function(e){return"".concat(e,"/")}},{key:"getMangaDetails",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n,c,i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.slice(t.indexOf("/",t.indexOf("/")+2),t.length),r=t.replace(a,""),n=createRequestObject({url:"".concat(r,"/"),method:ve,param:a}),e.next=5,this.requestManager.schedule(n,1);case 5:if(c=e.sent,i=this.cheerio.load(c.data),!t.toLowerCase().includes("mangakakalot")){e.next=11;break}return e.abrupt("return",te(i,t));case 11:return e.abrupt("return",he(i,t));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChapters",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n,c,i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.slice(t.indexOf("/",t.indexOf("/")+2),t.length),r=t.replace(a,""),n=createRequestObject({url:"".concat(r,"/"),method:ve,param:a}),e.next=5,this.requestManager.schedule(n,1);case 5:if(c=e.sent,i=this.cheerio.load(c.data),!t.toLowerCase().includes("mangakakalot")){e.next=11;break}return e.abrupt("return",ae(i,t));case 11:return e.abrupt("return",pe(i,t));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChapterDetails",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a){var r,n,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.toLowerCase().includes("manganelo")?createRequestObject({url:"".concat(a),method:ve,headers:{Referer:me,"content-type":"application/x-www-form-urlencoded",Cookie:"content_lazyload=off"}}):createRequestObject({url:"".concat(a),method:ve,headers:{"content-type":"application/x-www-form-urlencoded",Cookie:"content_lazyload=off"}}),e.next=3,this.requestManager.schedule(r,1);case 3:if(n=e.sent,c=this.cheerio.load(n.data),!t.toLowerCase().includes("mangakakalot")){e.next=9;break}return e.abrupt("return",re(c,t,a));case 9:return e.abrupt("return",fe(c,t,a));case 10:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"filterUpdatedManga",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a,r){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(createMangaUpdates({ids:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"getHomePageSections",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n,c,i,s,o,u,l,d,h,p,f,g,m,v,b;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=createHomeSection({id:"popular_manga",title:"POPULAR MANGA"}),r=createHomeSection({id:"latest_updates",title:"LATEST MANGA RELEASES",view_more:!0}),n=createHomeSection({id:"hot_manga",title:"HOT MANGA",view_more:!0}),c=createHomeSection({id:"new_manga",title:"NEW MANGA",view_more:!0}),i=createHomeSection({id:"zcompleted_manga",title:"COMPLETED MANGA",view_more:!0}),s=createRequestObject({url:"".concat(ge),method:"GET"}),o=createRequestObject({url:"".concat(ge,"/manga_list?type=topview&category=all&state=all&page="),method:"GET"}),u=createRequestObject({url:"".concat(ge,"/manga_list?type=newest&category=all&state=all&page="),method:"GET"}),l=createRequestObject({url:"".concat(ge,"/manga_list?type=newest&category=all&state=Completed&page="),method:"GET"}),e.next=11,this.requestManager.schedule(s,1);case 11:return d=e.sent,h=this.cheerio.load(d.data),e.next=15,this.requestManager.schedule(o,1);case 15:return p=e.sent,f=this.cheerio.load(p.data),e.next=19,this.requestManager.schedule(u,1);case 19:return g=e.sent,m=this.cheerio.load(g.data),e.next=23,this.requestManager.schedule(l,1);case 23:v=e.sent,b=this.cheerio.load(v.data),ne(h,[a,r],t),ce(f,[n],t),ce(m,[c],t),ce(b,[i],t);case 29:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchRequest",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a){var r,n,c,i,s,o,u,l;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=null!==(r=null===(n=a)||void 0===n?void 0:n.page)&&void 0!==r?r:1,i=se(t),s=createRequestObject({url:"".concat(ge,"/search/story/"),method:ve,headers:be,param:"".concat(i,"?page=").concat(c)}),e.next=5,this.requestManager.schedule(s,1);case 5:return o=e.sent,u=this.cheerio.load(o.data),l=oe(u),a=de(u)?void 0:{page:c+1},e.abrupt("return",createPagedResults({results:l,metadata:a}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getTags",value:function(){var e=Object(N.a)(T.a.mark((function e(){var t,a,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=createRequestObject({url:ge,method:ve,headers:be}),e.next=3,this.requestManager.schedule(t,1);case 3:return a=e.sent,r=this.cheerio.load(a.data),e.abrupt("return",ue(r));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getViewMoreItems",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a){var r,n,c,i,s,o,u,l;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=null!==(r=null===(n=a)||void 0===n?void 0:n.page)&&void 0!==r?r:1,i="",e.t0=t,e.next="latest_updates"===e.t0?5:"hot_manga"===e.t0?7:"new_manga"===e.t0?9:"zcompleted_manga"===e.t0?11:13;break;case 5:return i="/manga_list?type=latest&category=all&state=all&page=".concat(c),e.abrupt("break",14);case 7:return i="/manga_list?type=topview&category=all&state=all&page=".concat(c),e.abrupt("break",14);case 9:return i="/manga_list?type=newest&category=all&state=all&page=".concat(c),e.abrupt("break",14);case 11:return i="/manga_list?type=newest&category=all&state=Completed&page=".concat(c),e.abrupt("break",14);case 13:return e.abrupt("return",Promise.resolve(null));case 14:return s=createRequestObject({url:ge,method:ve,param:i}),e.next=17,this.requestManager.schedule(s,1);case 17:return o=e.sent,u=this.cheerio.load(o.data),l=le(u),a=de(u)?void 0:{page:c+1},e.abrupt("return",createPagedResults({results:l,metadata:a}));case 22:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"globalRequestHeaders",value:function(){var e=Object(N.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{referer:me});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),a}(q),je="https://mangadex.org",Oe="https://api.mangadex.org",ke={author:"nar1n",description:'Extension that pulls manga from MangaDex"',icon:"icon.png",name:"MangaDex",version:"1.0.0",authorWebsite:"https://github.com/nar1n",websiteBaseURL:je,hentaiSource:!1,language:S.LanguageCode.ENGLISH,sourceTags:[{text:"Recommended",type:S.TagType.BLUE},{text:"Notifications",type:S.TagType.GREEN}]},we=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).languageMapping={en:"gb","pt-br":"pt",ru:"ru",fr:"fr","es-la":"es",pl:"pl",tr:"tr",it:"it",es:"es",id:"id",vi:"vn",hu:"hu",zh:"cn",de:"de","zh-hk":"hk",th:"th",bg:"bg",uk:"ua",mn:"mn",ro:"ro",ms:"my",ja:"jp",ko:"kr",cs:"cz",pt:"pt",nl:"nl",no:"no",lt:"lt",da:"dk",fi:"fi"},e}return Object(o.a)(a,[{key:"getMangaShareUrl",value:function(e){return"".concat(je,"/manga/").concat(e)}},{key:"getMangaUrl",value:function(e){return"https://cubari.moe/read/mangadex/".concat(e)}},{key:"getSourceDetails",value:function(){return ke}},{key:"getMangaUUIDs",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n,c,i,s,o,u,l,d=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.length>1&&void 0!==d[1]?d[1]:"manga",a=t.length,r=0,n={};case 4:return c=createRequestObject({url:"".concat(Oe,"/legacy/mapping"),method:"POST",headers:{"content-type":"application/json"},data:{type:"manga",ids:t.slice(r,r+500).map((function(e){return Number(e)}))}}),r+=500,e.next=9,this.requestManager.schedule(c,1);case 9:i=e.sent,s="string"===typeof i.data?JSON.parse(i.data):i.data,o=Object(M.a)(s);try{for(o.s();!(u=o.n()).done;)l=u.value,n[l.data.attributes.legacyId]=l.data.attributes.newId}catch(h){o.e(h)}finally{o.f()}if(!(r>=a)){e.next=15;break}return e.abrupt("break",17);case 15:e.next=4;break;case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAuthors",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n,c,i,s,o,u,l,d,h,p;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="".concat(Oe,"/author/?limit=100"),r=0,n=Object(M.a)(t);try{for(n.s();!(c=n.n()).done;)i=c.value,a+="&ids[".concat(r,"]=").concat(i),r+=1}catch(f){n.e(f)}finally{n.f()}return s=createRequestObject({url:a,method:"GET"}),e.next=7,this.requestManager.schedule(s,1);case 7:o=e.sent,u="string"===typeof o.data?JSON.parse(o.data):o.data,l={},d=Object(M.a)(u.results);try{for(d.s();!(h=d.n()).done;)p=h.value,l[p.data.id]=p.data.attributes.name}catch(f){d.e(f)}finally{d.f()}return e.abrupt("return",l);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getGroups",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n,c,i,s,o,u,l,d,h,p,f,g;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.length,r=0,n={};case 3:0,c="".concat(Oe,"/group/?limit=100&offset=").concat(r),i=0,s=Object(M.a)(t.slice(r,r+100));try{for(s.s();!(o=s.n()).done;)u=o.value,c+="&ids[".concat(i,"]=").concat(u),i+=1}catch(m){s.e(m)}finally{s.f()}return r+=100,l=createRequestObject({url:c,method:"GET"}),e.next=12,this.requestManager.schedule(l,1);case 12:d=e.sent,h="string"===typeof d.data?JSON.parse(d.data):d.data,p=Object(M.a)(h.results);try{for(p.s();!(f=p.n()).done;)g=f.value,n[g.data.id]=g.data.attributes.name}catch(m){p.e(m)}finally{p.f()}if(!(r>=a)){e.next=18;break}return e.abrupt("break",20);case 18:e.next=3;break;case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMDHNodeURL",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=createRequestObject({url:"".concat(Oe,"/at-home/server/").concat(t),method:"GET"}),e.next=3,this.requestManager.schedule(a,1);case 3:return r=e.sent,n="string"===typeof r.data?JSON.parse(r.data):r.data,e.abrupt("return",n.baseUrl);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMangaDetails",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n,c,i,s,o,u,l,d,h,p,f,g,m,v,b,y=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.includes("-")){e.next=7;break}return e.next=3,this.getMangaUUIDs([t]);case 3:r=e.sent,a=r[t],e.next=8;break;case 7:a=t;case 8:return n=createRequestObject({url:"".concat(Oe,"/manga/").concat(a),method:"GET"}),e.next=11,this.requestManager.schedule(n,1);case 11:c=e.sent,i="string"===typeof c.data?JSON.parse(c.data):c.data,s=i.data.attributes,o=[s.title[Object.keys(s.title)[0]]].concat(s.altTitles.map((function(e){return y.decodeHTMLEntity(e[Object.keys(e)[0]])}))),u=this.decodeHTMLEntity(s.description.en),l=S.MangaStatus.COMPLETED,"ongoing"==s.status&&(l=S.MangaStatus.ONGOING),d=[],h=Object(M.a)(s.tags);try{for(f=function(){var e=p.value,t=e.attributes.name;d.push(createTag({id:e.id,label:Object.keys(t).map((function(e){return t[e]}))[0]}))},h.s();!(p=h.n()).done;)f()}catch(x){h.e(x)}finally{h.f()}if(g=i.relationships.filter((function(e){return"author"==e.type})).map((function(e){return e.id})),m=i.relationships.filter((function(e){return"artist"==e.type})).map((function(e){return e.id})),0==(v=g.concat(m)).length){e.next=30;break}return e.next=27,this.getAuthors(v);case 27:b=e.sent,g=g.map((function(e){return y.decodeHTMLEntity(b[e])})).join(", "),m=m.map((function(e){return y.decodeHTMLEntity(b[e])})).join(", ");case 30:return e.abrupt("return",createManga({id:t,titles:o,image:"https://i.imgur.com/6TrIues.jpg",author:g,artist:m,desc:u,rating:5,status:l,tags:[createTagSection({id:"tags",label:"Tags",tags:d})]}));case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChapters",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n,c,i,s,o,u,l,d,h,p,f,g,m,v,b,y,x,j,O,k,w,N,S=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.includes("-")){e.next=7;break}return e.next=3,this.getMangaUUIDs([t]);case 3:r=e.sent,a=r[t],e.next=8;break;case 7:a=t;case 8:n=[],c=0,i=[];case 11:return s=createRequestObject({url:"".concat(Oe,"/manga/").concat(a,"/feed?limit=500&offset=").concat(c),method:"GET"}),e.next=15,this.requestManager.schedule(s,1);case 15:o=e.sent,u="string"===typeof o.data?JSON.parse(o.data):o.data,c+=500,l=Object(M.a)(u.results);try{for(l.s();!(d=l.n()).done;){h=d.value,p=h.data.id,f=h.data.attributes,g=this.decodeHTMLEntity(f.title),m=Number(null===f||void 0===f?void 0:f.chapter),v=Number(null===f||void 0===f?void 0:f.volume),b=f.translatedLanguage,b=Object.keys(this.languageMapping).includes(b)?this.languageMapping[f.translatedLanguage]:"_unkown",y=new Date(f.publishAt),x=h.relationships.filter((function(e){return"scanlation_group"==e.type})).map((function(e){return e.id})),j=Object(M.a)(x);try{for(j.s();!(O=j.n()).done;)k=O.value,i.includes(k)||i.push(k)}catch(T){j.e(T)}finally{j.f()}n.push({id:p,mangaId:t,name:g,chapNum:m,volume:v,langCode:b,groups:x,time:y})}}catch(T){l.e(T)}finally{l.f()}if(!(u.total<=c)){e.next=22;break}return e.abrupt("break",24);case 22:e.next=11;break;case 24:return e.next=26,this.getGroups(i);case 26:return w=e.sent,N=n.map((function(e){return e.group=e.groups.map((function(e){return S.decodeHTMLEntity(w[e])})).join(", ")+"",delete e.groups,createChapter(e)})),e.abrupt("return",N);case 29:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChapterDetails",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a){var r,n,c,i,s,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.includes("-")){e.next=2;break}throw new Error("OLD ID: PLEASE REFRESH AND CLEAR ORPHANED CHAPTERS");case 2:return e.next=4,this.getMDHNodeURL(a);case 4:return r=e.sent,n=createRequestObject({url:"".concat(Oe,"/chapter/").concat(a),method:"GET"}),e.next=8,this.requestManager.schedule(n,1);case 8:return c=e.sent,i="string"===typeof c.data?JSON.parse(c.data):c.data,s=i.data.attributes,o=s.data.map((function(e){return"".concat(r,"/data/").concat(s.hash,"/").concat(e)})),e.abrupt("return",createChapterDetails({id:a,mangaId:t,pages:o,longStrip:!1}));case 13:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"searchRequest",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a){var r,n,c,i,s,o,u,l,d,h,p,f,g;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=null!==(r=null===a||void 0===a?void 0:a.offset)&&void 0!==r?r:0,i=[],s=createRequestObject({url:"".concat(Oe,"/manga?title=").concat(encodeURIComponent(null!==(n=t.title)&&void 0!==n?n:""),"&limit=100&offset=").concat(c),method:"GET"}),e.next=5,this.requestManager.schedule(s,1);case 5:if(200==(o=e.sent).status){e.next=8;break}return e.abrupt("return",createPagedResults({results:i}));case 8:u="string"===typeof o.data?JSON.parse(o.data):o.data,l=Object(M.a)(u.results);try{for(l.s();!(d=l.n()).done;)h=d.value,p=h.data.id,f=h.data.attributes,g=this.decodeHTMLEntity(f.title[Object.keys(f.title)[0]]),i.push(createMangaTile({id:p,title:createIconText({text:g}),image:"https://i.imgur.com/6TrIues.jpg"}))}catch(m){l.e(m)}finally{l.f()}return e.abrupt("return",createPagedResults({results:i,metadata:{offset:c+100}}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getHomePageSections",value:function(){var e=Object(N.a)(T.a.mark((function e(t){var a,r,n,c,i,s=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=[{request:createRequestObject({url:"".concat(Oe,"/manga?limit=20"),method:"GET"}),section:createHomeSection({id:"recently_updated",title:"RECENTLY UPDATED TITLES",view_more:!0})},{request:createRequestObject({url:"".concat(Oe,"/manga?limit=20&publicationDemographic[0]=shounen"),method:"GET"}),section:createHomeSection({id:"shounen",title:"UPDATED SHOUNEN TITLES",view_more:!0})},{request:createRequestObject({url:"".concat(Oe,"/manga?limit=20&includedTags[0]=391b0423-d847-456f-aff0-8b0cfc03066b"),method:"GET"}),section:createHomeSection({id:"action",title:"UPDATED ACTION TITLES",view_more:!0})}],r=[],n=function(){var e=i[c];t(e.section),r.push(s.requestManager.schedule(e.request,1).then((function(a){var r,n="string"===typeof a.data?JSON.parse(a.data):a.data,c=[],i=Object(M.a)(n.results);try{for(i.s();!(r=i.n()).done;){var o=r.value,u=o.data.id,l=o.data.attributes,d=s.decodeHTMLEntity(l.title[Object.keys(l.title)[0]]);c.push(createMangaTile({id:u,title:createIconText({text:d}),image:"https://i.imgur.com/6TrIues.jpg"}))}}catch(h){i.e(h)}finally{i.f()}e.section.items=c,t(e.section)})))},c=0,i=a;c<i.length;c++)n();return e.next=6,Promise.all(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getViewMoreItems",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a){var r,n,c,i,s,o,u,l,d,h,p,f,g,m,v;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=null!==(r=null===a||void 0===a?void 0:a.offset)&&void 0!==r?r:0,i=null!==(n=null===a||void 0===a?void 0:a.collectedIds)&&void 0!==n?n:[],s=[],o="",e.t0=t,e.next="recently_updated"===e.t0?7:"shounen"===e.t0?9:"action"===e.t0?11:13;break;case 7:return o="".concat(Oe,"/manga?limit=100&offset=").concat(c),e.abrupt("break",13);case 9:return o="".concat(Oe,"/manga?limit=100&publicationDemographic[0]=shounen&offset=").concat(c),e.abrupt("break",13);case 11:return o="".concat(Oe,"/manga?limit=100&includedTags[0]=391b0423-d847-456f-aff0-8b0cfc03066b&offset=").concat(c),e.abrupt("break",13);case 13:return u=createRequestObject({url:o,method:"GET"}),e.next=16,this.requestManager.schedule(u,1);case 16:l=e.sent,d="string"===typeof l.data?JSON.parse(l.data):l.data,h=Object(M.a)(d.results);try{for(h.s();!(p=h.n()).done;)f=p.value,g=f.data.id,m=f.data.attributes,v=this.decodeHTMLEntity(m.title[Object.keys(m.title)[0]]),i.includes(g)||(s.push(createMangaTile({id:g,title:createIconText({text:v}),image:"https://i.imgur.com/6TrIues.jpg"})),i.push(g))}catch(b){h.e(b)}finally{h.f()}return e.abrupt("return",createPagedResults({results:s,metadata:{offset:c+100,collectedIds:i}}));case 21:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"filterUpdatedManga",value:function(){var e=Object(N.a)(T.a.mark((function e(t,a,r){var n,c,i,s,o,u,l,d,h,p,f,g,m,v,b;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.filter((function(e){return!e.includes("-")})),c={},0==n.length){e.next=7;break}return e.next=5,this.getMangaUUIDs(n);case 5:for(c=e.sent,i=0,s=Object.keys(c);i<s.length;i++)o=s[i],c[c[o]]=o;case 7:u=0,l=!0,d=[];case 10:if(!l){e.next=21;break}return h=createRequestObject({url:"".concat(Oe,"/manga?limit=100&offset=").concat(u),method:"GET"}),e.next=14,this.requestManager.schedule(h,1);case 14:p=e.sent,f="string"===typeof p.data?JSON.parse(p.data):p.data,g=Object(M.a)(f.results);try{for(g.s();!(m=g.n()).done;)v=m.value,b=v.data.id,new Date(v.data.attributes.updatedAt)<=a?l=!1:r.includes(b)?d.push(b):r.includes(c[b])&&d.push(c[b])}catch(y){g.e(y)}finally{g.f()}l&&(u+=100),e.next=10;break;case 21:d.length>0&&t(createMangaUpdates({ids:d}));case 22:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"decodeHTMLEntity",value:function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(t)})).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'")}}]),a}(q),Te=a(27),Me=a.n(Te),Ne={};localStorage.getItem("hentai")||window.location.search.includes("hentai")?Ne.NHentai=new A(Me.a):(Ne.MangaKatana=new V(Me.a),Ne.Guya=new ee(Me.a),Ne.Mangakakalot=new xe(Me.a),Ne.MangaDex=new we(Me.a));var Se=Ne,Ee=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).initializeMobileMenu=function(){var e=document.getElementById("navMenu"),t=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);t.length>0&&t.forEach((function(t){t.addEventListener("click",(function(){t.classList.toggle("is-active"),e.classList.toggle("is-active")}))})),Array.prototype.slice.call(document.querySelectorAll(".ni"),0).forEach((function(t){t.addEventListener("click",(function(){document.querySelector(".navbar-burger").classList.remove("is-active"),e.classList.remove("is-active")}))}))},r.initializeDiscoverItems=function(){r.sources.forEach((function(e){e.getHomePageSections((function(t){t.title.startsWith(e.getSourceDetails().name)||(t.title="".concat(e.getSourceDetails().name," - ").concat(t.title)),t.source=e,t.mangaUrlizer=e.getMangaUrl,r.setState({discover:new Set(r.state.discover).add(t)})}))}))},r.componentDidMount=function(){r.initializeMobileMenu(),r.initializeDiscoverItems()},r.state={discover:new Set},r.sources=Object.values(Se),r}return Object(o.a)(a,[{key:"render",value:function(){return Object(v.jsxs)(d.a,{children:[Object(v.jsx)("nav",{className:"navbar is-dark",role:"navigation","aria-label":"main navigation",children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsxs)("div",{className:"navbar-brand",children:[Object(v.jsx)("div",{className:"navbar-item navbar-logo",children:Object(v.jsx)(d.b,{to:"/",children:Object(v.jsx)("img",{src:"https://cubari.moe/static/favicon.png",alt:"logo"})})}),Object(v.jsxs)("a",{role:"button",className:"navbar-burger","aria-label":"menu","aria-expanded":"false",children:[Object(v.jsx)("span",{"aria-hidden":"true"}),Object(v.jsx)("span",{"aria-hidden":"true"}),Object(v.jsx)("span",{"aria-hidden":"true"})]})]}),Object(v.jsx)("div",{id:"navMenu",className:"navbar-menu",children:Object(v.jsxs)("div",{className:"navbar-start",children:[Object(v.jsx)(d.b,{className:"navbar-item ni",to:"/",children:"Discover"}),Object(v.jsx)(d.b,{className:"navbar-item ni",to:"/search",children:"Search"}),Object(v.jsx)(d.b,{className:"navbar-item ni",to:"/history",children:"History"})]})})]})}),Object(v.jsx)("div",{className:"container is-fluid",children:Object(v.jsx)("div",{className:"container",children:Object(v.jsxs)(h.c,{children:[Object(v.jsx)(h.a,{exact:!0,path:"/",children:Object(v.jsx)(x,{discover:this.state.discover})}),Object(v.jsx)(h.a,{exact:!0,path:"/search",children:Object(v.jsx)(j,{sources:this.sources})}),Object(v.jsx)(h.a,{exact:!0,path:"/history",children:Object(v.jsx)(O,{})}),Object(v.jsx)(h.a,{children:Object(v.jsx)(k,{})})]})})})]})}}]),a}(r.Component);i.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(Ee,{})}),document.getElementById("root"))},95:function(e,t,a){},96:function(e,t,a){}},[[216,1,2]]]);